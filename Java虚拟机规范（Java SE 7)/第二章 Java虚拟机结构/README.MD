# 内容提要

* 这一章概述了Java虚拟机整体架构

## Class 文件
* 经编译后被虚拟机执行后以二进制形式存储的文件，定义了类与接口的表现形式。

## 数据类型
* Java 虚拟机可以操作的数据类型分为原始类型，引用类型。这跟Java 语言类似。
* Java 虚拟机希望编译器在编译期间尽最大努力完成类型检查，使Java 虚拟机在编译时无需进行类型检查，最大可能消除编译时异常。

## 原始类型与值
* Java 虚拟机支持的原始数据类型包括 数值类型(Numeric Types) 布尔类型(Boolean Type) 和 returnAddress 类型。
* 数值类型包括整型(Integral Types)和浮点型(Floating point Typess)

## 引用类型与值
* Java 虚拟机有三种应用类型：类类型(Class Types) 数组类型(Arrary Types)和接口类型(Interface Types)
* Java 虚拟机规范没有规定null在虚拟机实现中以怎样的编码表示。

## 运行时数据区

## PC 寄存器
* JVM 可支持多条线程同时执行，每一条JVM 线程都有自己的PC（Program Counter）寄存器。
*	任意时刻，一条Java 虚拟机线程只会执行一个方法的代码，被称为该线程的当前方法（Current Method，§2.6）。
	如果这个方法不是native 的，那PC 寄存器就保存Java 虚拟机正在执行的字节码指令的地址，
	如果该方法是native 的，那PC 寄存器的值是undefined。
*	PC 寄存器的容量至少应当能保存一个returnAddress 类型的数据或者一个与平台相关的本地指针的值。

## Java 虚拟机栈
*   每一条Java 虚拟机线程都有自己私有的Java 虚拟机栈（Java Virtual Machine Stack）这个栈与线程同时创建，用于
 存储栈帧（Frames）。Java 虚拟机栈的作用与传统语言（例如C 语言）中的栈非常类似，用于存储局部变量与一些过程结果。
*	栈帧可以在堆中分配的原因：除了栈帧的出栈和入栈，Java 虚拟机栈不会再受其他因素的影响;
*	Java 虚拟机栈所使用的内存不需要保证是连续的。

* Java 虚拟机规范允许Java 虚拟机栈被实现成固定大小的或者是根据计算动态扩展和收缩的。
    如果采用固定大小的Java 虚拟机栈设计，那每一条线程的Java 虚拟机栈容量应当在线程创建的时候独立地选定。
    Java 虚拟机实现应当提供给程序员或者最终用户调节虚拟机栈初始容量的手段，对于可以动态扩展和收缩Java 虚拟机栈来说，则应当提供调节其最大、最小容量的手段。

## Java 堆
*  在Java 虚拟机中，堆（Heap）是可供各条线程共享的运行时内存区域，也是供所有类实例和数组对象分配内存的区域。
* Java 堆在虚拟机启动的时候被创建，存储了被自动内存管理系统（Automatic StorageManagement System）所管理的各种
对象，这些受管理的对象无需，也无法显式地被销毁。
* Java 堆的容量可以是固定大小的，也可以随着程序执行的需求动态扩展。Java 堆所使用的内存不需要保证是连续的。
* Java 虚拟机实现应当提供给程序员或者最终用户调节Java 堆初始容量的手段，
	对于可以动态扩展和收缩Java 堆来说，则应当提供调节其最大、最小容量的手段。
	
## 方法区
* 方法区（Method Area）供各条线程共享的运行时内存区域。
* 方法区存储了每一个类的结构信息，例如运行时常量池（Runtime Constant Pool）、字段和方法数据、构造函数和普通方法的字节码内容、还包括一些在类、实例、接口初始化时用到的特殊方法。
* 方法区在虚拟机启动的时候被创建，是堆的逻辑组成部分，但是简单的虚拟机实现可以选择在这个区域不实现垃圾收集。

## 运行时常量池
*  运行时常量池（Runtime Constant Pool）是每一个类或接口的常量池（Constant_Pool）的运行时表示形式，它包括了若干种不同的常量：
从编译期可知的数值字面量到必须运行期解析后才能获得的方法或字段引用。
运行时常量池扮演了类似传统语言中符号表（Symbol Table）的角色，它存储数据范围比通常意义上的符号表要更为广泛。
* 每一个运行时常量池都分配在Java 虚拟机的方法区之中，在类和接口被加载到虚拟机后，对应的运行时常量池就被创建出来。

## 本地方法栈

 

















